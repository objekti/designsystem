import { Meta } from '@components';
import { MenuPageLayout } from '@layouts';
import { Figma } from 'mdx-embed';
import { Heading, Paragraph, Alert } from '@digdir/design-system-react';

<Meta
  title='Validering og feilmeldinger'
  description='Slik forteller du brukeren at noe har gått galt eller mangler.'
/>

export default ({ children, menu }) => (
  <MenuPageLayout
    content={children}
    data={{
      title: 'Validering og feilmeldinger',
      date: '5. april 2023',
    }}
  />
);

Mønsteret er under arbeid og krever mer innsikt og samarbeid på tvers. Sitter du på innsikt som er relevant for validering og feilmeldinger? [Ta kontakt](mailto:designsystem@digdir.no) så kan vi dele innsikt og diskutere dette mønsteret sammen!

## Feilmeldinger

Feilmeldinger forklarer brukeren hva som gikk galt og hvordan det kan rettes opp i.

Disse retningslinjene bør følges:

- Kravene for å fylle ut feltene riktig skal tydelig fremgå på forhånd uten at brukeren trenger å få noen feilmeldinger fra valideringen for å forstå dette.
- Felt(ene) som er feil skal være lette å finne. Feilmeldingen bør plasseres i nærheten av feltet som er feil, og koblet til feltet ved hjelp av `aria-describedby`.
- Feilmeldingen skal være lett å legge merke til og forstå. Bruk rød farge, grafiske midler, `aria-invalid` og forklarende tekst.
- Brukere skal ikke måtte huske instruksjonene for å fikse feilen.
- Dersom et skjema har feil når brukeren forsøker å gå videre, bør en oppsummering vise alle feilene og lenke til feltene som har feil. Feilene skal forsvinne fra oppsummeringen etterhvert som de blir utbedret.

### Formulering av feilmeldinger

Vær kort og tydelig i formuleringen av feilmeldingene og sørg for at brukeren vet hva som må gjøres for å komme videre. Å skrive “Feltet er ikke fyllt ut korrekt”, gir ikke brukeren en forklaring på hva som er feil. Gi så spesifikk informasjon som mulig om hva problemet er og gjenta gjerne nøkkelord fra label. Foreslå evt. korrigeringer, f.eks. ved ugyldige tegn eller feilstavinger.

Eksempel på forklarende feilmeldinger:<br/>

- “Postnummer må ha 4 siffer”
- "Fødselsnummer må bestå av fødselsdato (6 siffer) og personnummer (5 siffer)"
- “Du må velge minst ett av leveringsalternativene”
- “For å sende inn skjemaet må du bekrefte at navnet er korrekt ved å huke av i avkrysningsboksen”

### Eksempel på feilmelding relatert til avkrysningsbokser

I dette eksempelet har brukeren forsøkt å trykke “Neste” uten å svart på obligatoriske spørsmål. Den røde boksen i bunnen viser kun når “Neste” er forsøkt klikket på.

<Figma
  title='Boop'
  url='file/vpM9dqqQPHqU6ogfKp5tlr/Felles-komponenter?node-id=7795%3A47239&t=rJYuezxREbfP1OVv-1'
/>

### Plassering av feilmelding

Ved feil i besvarelser skal feilmelding komme så raskt som mulig, men ikke før feltet forlates. Det aktuelle svarfeltet skal markeres, og brukeren skal få hjelp til å løse problemet. Brukeren skal ha adgang til å gå videre uten å rette feilen, der det er mulig. Hvis en feil skyldes kryssvalidering mellom felter skal dette forklares, begge felter skal merkes, og hvis feilen ligger på ulike skjemasider skal det lenkes til det andre feltet. I skjema som er lange, eller har flere trinn, skal feil som gjenstår på slutten vises som en liste med lenker til aktuelle felt.<br/> [Elmer 3 - 4.3](https://brukskvalitet.brreg.no/elmer3/)

Øvrige kilder:<br/>
[UU-tilsynet](https://www.uutilsynet.no/veiledning/skjema/38#formidle_feil_i_skjema)<br/>
[NN Group - Error Messages Guidelines](https://www.nngroup.com/articles/error-message-guidelines/)<br/>
[NN Group - How to Report Errors in Forms](https://www.nngroup.com/articles/errors-forms-design-guidelines/)
